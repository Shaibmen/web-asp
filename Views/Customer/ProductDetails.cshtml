@model WEbAPi.Models.ProductDetailsViewModel

<h2>@Model.Product.Title</h2>
<p><strong>Автор:</strong> @Model.Product.Author</p>
<p><strong>Цена:</strong> @Model.Product.Price</p>

<h3>Отзывы</h3>
@if (Model.Reviews != null && Model.Reviews.Any())
{
    @foreach (var review in Model.Reviews)
    {
        <div>
            <p>
                <strong>@review.User.Login</strong> (Оценка:
                @for (int i = 1; i <= 5; i++)
                {
                    if (i <= review.Rating)
                    {
                        <span style="color: gold;">☆</span>
                    }
                    else
                    {
                        <span>☆</span>
                    }
                }
                )
            </p>
            <p>@review.ReviewText</p>
            <p><em>Дата: @review.CreatedAt.ToShortDateString()</em></p>
        </div>
    }
}
else
{
    <p>Пока нет отзывов.</p>
}

@if (User.Identity.IsAuthenticated)
{
    <form asp-action="AddToCart" method="post" style="display:inline;">
        <input type="hidden" name="catalogId" value="@Model.Product.CatalogsId" />
        <button type="submit" class="btn btn-primary">Добавить в корзину</button>
    </form>

    <h3>Оставьте отзыв</h3>
    <form method="post" asp-action="AddReview">
        <input type="hidden" name="productId" value="@Model.Product.CatalogsId" />
        <div class="form-group">
            <label for="rating">Оценка (1-5)</label>
            <select name="rating" class="form-control">
                @for (int i = 1; i <= 5; i++)
                {
                    <option value="@i">@i</option>
                }
            </select>
        </div>
        <div class="form-group">
            <label for="text">Отзыв</label>
            <textarea name="text" class="form-control" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Оставить отзыв</button>
    </form>
}